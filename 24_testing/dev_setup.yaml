# This docker-compose file will create the environments and the containers needed for project development

version: '3.8' # Specify version of docker-compose for backwards compatability

services: #Define services (docker containers) to run
  sel:
    image: selenium/standalone-chrome:118.0
    shm_size: 2gb
    ports:
      - '4444:4444'
      - '7900:7900'
  dev:
    build: ./01_dev_requirements
    depends_on: 
      - sel
    restart: always
    ports:
      - '10000:8888' # Port to access notebook
      - '4040:4040'   # Port to access SparkUI (Spark Monitoring and Instrumentation UI)
    volumes:
      - ${PWD}:/home/jovyan/work
      
  app:
    depends_on:
      - dev
    build: ./02_app_requirements
    ports:
      - '8502:8501' # Port to access app
    volumes:
      - ${PWD}:/app

